#:kivy 2.0.0

CreateScreen:
    BoxLayout:
        id: box
        orientation: 'vertical'
        spacing: dp(10)

        Label:
            text: 'Create New Library'
            pos_hint: {'left': 1}
            size_hint: 0.6, 0.05

        TextInput:
            id: name_input

            text: 'Library Name...'
            pos_hint: {'left': 1}
            size_hint: 0.6, 0.05

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 0.6

            BoxLayout:
                orientation: 'vertical'

                FileExplorer:
                    id: explorer

                    dirselect: True

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, 0.25

                    Button:
                        id: add_button

                        text: 'Add'
                        on_press: root.add_to_library()

                    LabelledCheckBox:
                        id: addrec_check

                        text: 'Add recursively'

            BoxLayout:
                orientation: 'vertical'

                LibraryList:
                    id: librarylist

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, 0.25

                    LabelledCheckBox:
                        id: fullpath_check

                        text: 'Show full path'
                        on_active: root._update_list()

                    Button:
                        id: remove_button

                        text: 'Remove'
                        on_press: root.remove_selected()

                    Button:
                        text: 'Clear'
                        on_press: root.clear_library()

        Button:
            id: save_button

            size_hint: 0.25, 0.1
            text: 'Save as...'
            on_press: root.save_library()


<LabelledCheckBox@StackLayout>:
    spacing: dp(10)

    text: ''
    active: False

    Label:
        size_hint: 0.75, None

        text: self.parent.text

    CheckBox:
        size_hint: 0.25, None
        on_active: root.active = self.active

#
#<OverwritePopup>
#    size_hint: 0.5, 0.5
#
#    title: 'Overwrite?'
#    content: popup_stack

<PopupStack>
    canvas.before:
        Color:
            rgba: 0, 0.2, 0.7, 0.5
        Rectangle:
            size: root.size
            pos: root.pos

    Label:
        size_hint: 1, 0.1
        text: 'File already exists. Overwrite?'

    Button:
        size_hint: 0.5, 0.1
        text: 'Save'

    Button:
        size_hint: 0.5, 0.1
        text: 'Cancel'


